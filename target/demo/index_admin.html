<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>管理員管理系統</title>
    <link rel="stylesheet" href="styles/stylesIndAdm.css">
</head>

<body>
    <header>
        <nav>
            <ul>
                <li class="left-link"><a href="index_shop.html">首頁</a></li>
                <li class="left-link"><a id="profileLink" href="profile.html">會員資料</a></li>
            </ul>
            <ul>
                <li class="right-link"><a id="logoutLink" href="#" onclick="logout()">登出</a></li>
                <li class="right-link"><a id="loginLink" href="login.html">會員登入</a></li>
                <li class="right-link">
                    <div id="user-info">
                        <!-- 這裡會顯示用戶名稱，初始為空 -->
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <h1>管理使用者</h1>
    <div class="list-container">
        <div id="userList" class="list">
            <!-- 使用者列表內容 -->
            <div class="user">
                <span>john@example.com</span>
                <button class="editBtn"><img src="pics/edit_icon.png" alt="編輯"></button>
            </div>
        </div>
    </div>
    
    <h1>管理店家</h1>
    <div class="list-container">    
        <div id="shopList" class="list">
            <!-- 店家列表內容 -->
            <div class="shop">
                <span>Jane@example.com</span>
                <button class="editBtn"><img src="pics/edit_icon.png" alt="編輯"></button>
                <a href="index_shop.html" target="_blank"><button class="goShopBtn"><img src="pics/go_icon.png" alt="前往店家"></button></a>
            </div>
        </div>
    </div>

    <h1>檢視歷史訂單</h1>
    <div class="list-container">    
        <div id="userHistoryList" class="list">
            <!-- 店家列表內容 -->
            <div class="userHistory">
                <span>user_id or gmail</span>
                <button class="viewHistoryBtn"><img src="pics/find_icon.png" alt="檢視歷史訂單"></button>
            </div>
        </div>
    </div>
    
    <!-- Modal for Editing User -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>編輯用戶</h2>
            <form id="editForm">
                <label for="name">姓名:</label>
                <input type="text" id="name" name="name">
    
                <label for="email">電子郵件:</label>
                <input type="email" id="email" name="email">
    
                <label for="phone">電話:</label>
                <input type="tel" id="phone" name="phone">
    
                <label for="password">密碼:</label>
                <input type="password" id="password" name="password">
    
                <button type="submit" id="saveBtn">確認修改</button>
                <button id="deleteBtn">刪除會員</button>
            </form>
        </div>
    </div>

    <footer>
        <p>版權所有 &copy; 2023 XX線上訂餐系統</p>
    </footer>

    <script>
        // 獲取用戶列表元素
        const userList = document.getElementById('userList');
        const shopList = document.getElementById('shopList');
        const userHistoryList = document.getElementById('userHistoryList');

        // 編輯按鈕的點擊事件
        userList.addEventListener('click', function(event) {
            if (event.target.tagName === 'IMG') {
                // 圖片被點擊
                const modal = document.getElementById('editModal');
                modal.style.display = 'block'; // 顯示modal
                // 在modal中填入用戶資料
                const email = event.target.parentElement.querySelector('span').textContent.trim();
                const editForm = document.getElementById('editForm');
                editForm.elements['email'].value = email;
            }
        });

        shopList.addEventListener('click', function(event) {
            if (event.target.tagName === 'IMG') {
                // 圖片被點擊
                const modal = document.getElementById('editModal');
                modal.style.display = 'block'; // 顯示modal
                // 在modal中填入用戶資料
                const email = event.target.parentElement.querySelector('span').textContent.trim();
                const editForm = document.getElementById('editForm');
                editForm.elements['email'].value = email;
            }
        });

        userHistoryList.addEventListener('click', function(event) {
            if (event.target.tagName === 'IMG') {
                //按下檢視歷史訂單按鈕
                //跳轉到歷史訂單頁面
            }
        });

        // 保存按鈕的點擊事件
        const saveBtn = document.getElementById('saveBtn');
        saveBtn.addEventListener('click', function(event) {
            event.preventDefault();
            // 這裡需要將編輯後的資料保存
            // 譬如從表單中獲取資料並進行更新
            const editForm = document.getElementById('editForm');
            const updatedName = editForm.elements['name'].value;
            const updatedEmail = editForm.elements['email'].value;
            const updatedPhone = editForm.elements['phone'].value;
            const updatedPassword = editForm.elements['password'].value;

            // 執行資料的更新
            // ...

            // 更新完畢後，隱藏modal
            const modal = document.getElementById('editModal');
            modal.style.display = 'none';
        });

        // 刪除按鈕的點擊事件
        const deleteBtn = document.getElementById('deleteBtn');
        deleteBtn.addEventListener('click', function(event) {
            // 這裡可以執行刪除用戶的操作
            // ...
        });

        const modal = document.getElementById('editModal');
        const closeBtn = document.getElementsByClassName('close')[0];
        
        // 點擊 .close 元素時，關閉 modal
        closeBtn.onclick = function() {
          modal.style.display = 'none';
        };
        
        // 點擊 modal 外部區域時，關閉 modal
        window.onclick = function(event) {
          if (event.target === modal) {
            modal.style.display = 'none';
          }
        };
        
        // 添加其他功能按鈕的事件處理
        // 例如：保存更改和刪除用戶
        document.getElementById('saveChanges').onclick = function() {
          // 保存更改的代碼
        };
        
        document.getElementById('deleteUser').onclick = function() {
          // 刪除用戶的代碼
        };
    </script>
</body>

</html>